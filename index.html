<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Benji's Space</title>

    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='faviconStuff/apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='faviconStuff/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='faviconStuff/favicon-16x16.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='faviconStuff/site.webmanifest') }}">

    <!-- Open Graph / Facebook / Discord -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.yo-bi.co.uk">
    <meta property="og:title" content="Benji's Space">
    <meta property="og:description" content="I like to share random music and thoughts I have here">
    <meta property="og:image" content="https://www.yo-bi.co.uk/static/embed.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Benji's Site">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://www.yo-bi.co.uk">
    <meta name="twitter:title" content="Benji's Space">
    <meta name="twitter:description" content="I like to share random music and thoughts I have here">
    <meta name="twitter:image" content="https://www.yo-bi.co.uk/static/embed.jpg">

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <nav class="container">
            <div class="logo" id="logo">üéµ Benji's Space</div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#music">Music</a></li>
                <li><a href="#blog">Blog</a></li>
            </ul>
        </nav>
    </header>

    <!-- Easter Egg -->
    <div class="easter-egg" id="easter-egg">
        <img src="{{ url_for('static', filename='easter-egg-1.jpg') }}" alt="Easter Egg">
    </div>

    <!-- Expanded Blog Post Overlay -->
    <div class="expanded-post" id="expanded-post">
        <button class="close-btn" id="close-btn">√ó</button>
        <div class="expanded-content" id="expanded-content">
            <!-- Content will be inserted here -->
        </div>
    </div>

    <main>
        <section id="home" class="hero">
            <div class="container">
                <h1>üéµ Music & Thoughts</h1>
                <p>Welcome welcome, this is just a site for me to post about random stuff. I'll share music I like and topics that interest me!</p>
                <p>Feel free to dm me on discord @yo_bi üíñ</p>
            </div>
        </section>

        <section id="music" class="section">
            <div class="container">
                <h2>üéß Top Music Picks</h2>
                <div class="music-grid" id="music-container">
                    <div class="loading"></div>
                </div>
            </div>
        </section>

        <section id="blog" class="section">
            <div class="container">
                <h2>üìù Sillys</h2>
                <small class="substring", style="text-align: center;">Click on them to expand them into bigger windows</small>
                <div class="blog-grid" id="blog-container">
                    <div class="loading"></div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Benji's Space. Made with ‚ù§Ô∏è and good music.</p>
        </div>
    </footer>

    <script>
        const musicData = {
            "tracks": [
                {
                    "title": "just saying, the body is honest.",
                    "artist": "shikiura sougo",
                    "description": "I love the way the song sounds, its a nice pace for a song and its something that can just be played in the background. Very nice!",
                    "spotify_id": "4z1O8W35JfmFjPlD9KYvid?si=27deb291460348ce"
                },
                {
                    "title": "Mai",
                    "artist": "Videoclub",
                    "description": "I dont understand a word of this song as its not in english, but the 'feeling' of the song is quite smooth if that makes sense. I like it alot as something to sleep to!",
                    "spotify_id": "2qRMnItMLesizxbPqIwcSm?si=fea43317e19849db"
                },
                {
                    "title":  "Baby Hotline",
                    "artist": "Jack Stauber's Micropop",
                    "description": "This one is a bit more random, but I like the way his voice kinda layers onto the music. Especially the random static, its such a great piece of music.",
                    "spotify_id": "1R8kvV2AgNPCA2Pp4Im1Ao?si=65902af76e6d4ff6"
                },
                {
                    "title": "King Of Nothing",
                    "artist": "BoyWithUke",
                    "description": "BoyWithUke is one of my favourite artists, he's the only musician ive ever bought merch for. I have a vinyl and a CD of his latest album (Burnout)",
                    "spotify_id": "7u8cR8A8XVdrk24vMYjhV2?si=0d894aa98e384b6c"
                },
                {
                    "title": "SMOKE IT OFF!",
                    "artist": "Lumi Athena, jnhygs",
                    "description": "Ive been getting into songs like this and others by Odetari recently, I love them alot.",
                    "spotify_id": "4mMEvkDeY56be4l7Itb5aZ?si=f1989096314247f6"
                },
                {
                    "title": "LOST!",
                    "artist": "ThxSoMch",
                    "description": "Get lost",
                    "spotify_id": "7AOe2bLNTnBt09RkfrRudU?si=629e5ac9c4c54796"
                }
            ]
        };

        const blogData = {
            "posts": [
                {
                    "title": "Discord TextToSpeech Bot",
                    "date": "2025-07-26",
                    "content": "I like the idea of discord bots that read out messages to a vc, its a useful feature for those who dont have mics. However, the one i currently use doesnt have that great of voices as its limited to Google TTS, therefore ive made my own bot!\n[image1]\nRemTTS is a bot that uses ElevenLabs to speak your messages out in a way more expressive set a voices, it sounds realistic and nicer to listen to. Go from a robot to sounding like a real person.\n\nRem uses ElevenLabs as the main TTS component, but if that ever fails we resort to GoogleTTS. Why would it fail? Many reasons, the first reason is filtered content, I have to make sure they follow Elevens API usage policies (we resort to google TTS here), or if keys fail. Since an API key is limited to 10k characters, I let users import their own API keys for my bot to use, this makes the bot \"Community Driven\" to an extent.\n[Invite The Bot Here.](https://discord.com/oauth2/authorize?client_id=1397691291214807180&permissions=8&integration_type=0&scope=bot)",
                    "images": {
                        "image1": "{{ url_for('static', filename='RemTTS-1.jpg') }}"
                    }
                },
                {
                    "title": "CSS vs no CSS",
                    "date": "2025-07-11",
                    "content": "CSS vs no CSS. I like to see the difference between having a CSS chunk vs without, its really cool to see the base of the website and then see how it was changed to look pretty! [image1]",
                    "images": {
                        "image1": "{{ url_for('static', filename='website-1.jpg') }}"
                    }
                },
                {
                    "title": "OtherSide",
                    "date": "2025-07-10",
                    "content": "OtherSide is a game a friend of mine is making, its like MiSide but with a different story I believe. Im sure this will be a great game when it comes out :D\n\nJoin the [Discord Server](https://discord.gg/C7rpFNSzk5) to stay updated! [image1]\n\nThey've just gone into public testing, heres a little showcase of that ^^ [gif1]",
                    "images": {
                        "image1": "{{ url_for('static', filename='OtherSide-1.jpg') }}",
                        "gif1": "{{ url_for('static', filename='OtherSide-1.gif') }}"
                    }
                },
                {
                    "title": "Dara.",
                    "date": "2025-07-10",
                    "content": "Dara. [image1]",
                    "images": {
                        "image1": "{{ url_for('static', filename='Dara.jpg') }}"
                    }
                },
                {
                    "title": "CakePixell.",
                    "date": "2025-07-10",
                    "content": "CakePixell. [image1]",
                    "images": {
                        "image1": "{{ url_for('static', filename='CakePixell.jpg') }}"
                    }
                }
            ]
        };

        // Easter Egg functionality
        let easterEggTimeout;
        let isEasterEggActive = false;

        function triggerEasterEgg() {
            if (isEasterEggActive) return;
            
            isEasterEggActive = true;
            const easterEgg = document.getElementById('easter-egg');
            
            // Show the easter egg
            easterEgg.classList.add('show');
            
            // After 3 seconds, shake and then hide
            setTimeout(() => {
                easterEgg.classList.add('shake');
                
                // Remove shake class after animation
                setTimeout(() => {
                    easterEgg.classList.remove('shake');
                    easterEgg.classList.remove('show');
                    
                    // Reset the active state after animation completes
                    setTimeout(() => {
                        isEasterEggActive = false;
                    }, 500);
                }, 500);
            }, 3000);
        }

        // Add click event to logo
        document.getElementById('logo').addEventListener('click', triggerEasterEgg);

        // Function to process markdown-style links [text](url)
        function processLinks(text) {
            // Regex to match [text](url) pattern
            const linkRegex = /\[([^\]]+)\]\(([^)]+)\)/g;
            return text.replace(linkRegex, (match, linkText, url) => {
                // Determine if it's an external link
                const isExternal = url.startsWith('http://') || url.startsWith('https://') || url.startsWith('www.');
                const target = isExternal ? '_blank' : '_self';
                const rel = isExternal ? 'noopener noreferrer' : '';
                
                return `<a href="${url}" class="content-link" target="${target}" ${rel ? `rel="${rel}"` : ''}>${linkText}</a>`;
            });
        }

        // Function to process text with image placeholders and links
        function processTextWithImages(text, images) {
            // First process the images
            let processedText = text;
            for (const [placeholder, imagePath] of Object.entries(images)) {
                const regex = new RegExp(`\\[${placeholder}\\]`, 'g');
                processedText = processedText.replace(regex, `
                    <img src="${imagePath}" alt="${placeholder}" loading="lazy" 
                    ${imagePath.endsWith('.gif') ? '<small>(GIF - may take a moment to load)</small>' : ''}
                `);
            }
            
            // Then process the links
            processedText = processLinks(processedText);
            
            // Convert line breaks to <br> tags
            processedText = processedText.replace(/\n/g, '<br>');
            
            return processedText;
        }

        // Render music cards
        function renderMusic() {
            const container = document.getElementById('music-container');
            container.innerHTML = '';
            
            musicData.tracks.forEach(track => {
                const card = document.createElement('div');
                card.className = 'music-card';
                
                // Process links in the description
                const processedDescription = processLinks(track.description);
                
                card.innerHTML = `
                    <h3>${track.title}</h3>
                    <p class="artist"><strong>${track.artist}</strong></p>
                    <iframe class="spotify-embed" 
                            src="https://open.spotify.com/embed/track/${track.spotify_id}?utm_source=generator&theme=0" 
                            frameborder="0" 
                            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                            loading="lazy">
                    </iframe>
                    <p class="description">${processedDescription}</p>
                `;
                container.appendChild(card);
            });
        }

        // Render blog posts
        function renderBlog() {
            const container = document.getElementById('blog-container');
            container.innerHTML = '';
            
            blogData.posts.forEach(post => {
                const card = document.createElement('div');
                card.className = 'blog-card';
                
                // Store the post data in the card element
                card.dataset.post = JSON.stringify(post);
                
                // Create preview content (shorter version)
                const previewContent = post.content.length > 100 ? 
                    post.content.substring(0, 100) + '...' : 
                    post.content;
                
                const processedPreview = processTextWithImages(previewContent, post.images);
                
                card.innerHTML = `
                    <h3>${post.title}</h3>
                    <div class="date">${new Date(post.date).toLocaleDateString('en-US', { 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    })}</div>
                    <p>${processedPreview}</p>
                `;
                
                // Add click event to expand the post
                card.addEventListener('click', function() {
                    expandPost(post);
                });
                
                container.appendChild(card);
            });
        }

        // Expand a blog post to full screen
        function expandPost(post) {
            const expandedPost = document.getElementById('expanded-post');
            const expandedContent = document.getElementById('expanded-content');
            
            // Process the full content with images and links
            const processedContent = processTextWithImages(post.content, post.images);
            
            // Create the expanded content
            expandedContent.innerHTML = `
                <h2>${post.title}</h2>
                <span class="date">${new Date(post.date).toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                })}</span>
                <div class="content">${processedContent}</div>
            `;
            
            // Show the expanded post
            expandedPost.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // Close the expanded post
        function closeExpandedPost() {
            const expandedPost = document.getElementById('expanded-post');
            expandedPost.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                renderMusic();
                renderBlog();
                
                // Add close button event
                document.getElementById('close-btn').addEventListener('click', closeExpandedPost);
                
                // Close expanded post when clicking outside content
                document.getElementById('expanded-post').addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeExpandedPost();
                    }
                });
            }, 500); // Small delay for effect
        });

        // Add some interactive effects
        function addCardInteractivity() {
            const cards = document.querySelectorAll('.music-card, .blog-card');
            
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transition = 'transform 0.1s ease';
                });
                
                card.addEventListener('mousemove', function(e) {
                    const rect = this.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const rotateX = (y - centerY) / 20;
                    const rotateY = (centerX - x) / 20;
                    
                    this.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(20px)`;
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transition = 'transform 0.3s ease';
                    this.style.transform = '';
                });
            });
        }
    </script>
</body>
</html>